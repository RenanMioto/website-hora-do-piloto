<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Histórico e Estatísticas — HP Manager</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
  <script defer src="stats.js"></script>
  <meta name="description" content="Histórico e estatísticas por pista e por piloto — HP Manager." />
  <style>
    /* polimento rápido sem interferir no seu style.css */
    .records-row{
      display:grid; gap:12px; grid-template-columns: 1fr 1fr;
    }
    .records-box, .records-section{
      background: var(--panel, #12131a);
      border: 1px solid var(--line, #1d1f2b);
      border-radius: 12px;
      padding: 12px 14px;
    }
    .records-box h3, .records-section h3{ margin: 0 0 6px 0; font-size: 1rem; }
    .table-wrapper{ overflow-x:auto; }
    @media (max-width: 720px){
      .records-row{ grid-template-columns: 1fr; }
      .topbar{ position: sticky; } /* no mobile, não fica travando */
    }
    /* acessibilidade rápida */
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;
    }
  </style>
</head>
<body>
  <!-- Topo padrão -->
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo-f1v.svg" alt="Logotipo F1 Virtual"
           onerror="this.onerror=null;this.src='assets/LogoHP.png';" />
      <span>HP Manager</span>
    </div>

    <button class="nav-toggle" aria-label="Abrir menu" aria-controls="mainnav" aria-expanded="false">☰</button>

    <nav id="mainnav" class="mainnav" aria-label="Menu principal">
      <a href="index.html">Início</a>
      <a href="gallery.html?album=calendario">Calendário</a>
      <a href="gallery.html?album=pilotos">Pilotos</a>
      <a href="gallery.html?album=construtores">Construtores</a>
      <a href="gallery.html?album=resultados">Resultados</a>
      <a href="stats.html" aria-current="page">Estatísticas e Históricos</a>
    </nav>

    <div class="social-actions">
      <a class="icon-btn wa" href="https://wa.me/5511974600392" target="_blank" title="WhatsApp">
        <svg viewBox="0 0 24 24"><path d="M20.52 3.48A11.94 11.94 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.11.55 4.1 1.6 5.9L0 24l6.27-1.64A11.93 11.93 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.2-1.25-6.21-3.48-8.52z"/></svg>
      </a>
      <a class="icon-btn dc" href="https://discord.gg/B5d2TqZr" target="_blank" title="Discord">
        <svg viewBox="0 0 24 24"><path d="M20.32 4.37A19.77 19.77 0 0 0 15.86 3l-.22.4a18.4 18.4 0 0 1 4.06 1.66c-1.65-.78-3.28-1.23-4.88-1.42a18.6 18.6 0 0 0-4.64 0c-1.6.19-3.23.64-4.88 1.42.4-.24 1.97-1.1 4.06-1.66L9.14 3c-1.66.2-3.33.65-4.98 1.37C1.68 6.93.8 9.91.8 12.83c0 0 1.05 1.8 3.82 2.84 0 0 .4-.7.73-1.3-1.39-.52-1.9-1.61-1.9-1.61s.12.09.33.22c.23.13.47.25.71.37.81.4 1.77.73 2.88.97a17.95 17.95 0 0 0 6.08 0 12.7 12.7 0 0 0 2.88-.97c.25-.12.49-.24.72-.37l.1-.06c.2-.12.32-.2.32-.2s-.5 1.08-1.9 1.6c.33.61.72 1.31.72 1.31 2.77-1.03 3.82-2.83 3.82-2.83 0-2.92-.88-5.9-3.36-7.46z"/></svg>
      </a>
      <a class="icon-btn ig" href="https://www.instagram.com/horadopiloto" target="_blank" title="Instagram">
        <svg viewBox="0 0 24 24"><path d="M12 2.2c3.2 0 3.58.01 4.85.07 1.17.05 1.8.24 2.22.4.56.22.96.48 1.38.9.42.42.69.82.9 1.38.16.41.35 1.05.4 2.21.06 1.28.07 1.65.07 4.85s-.01 3.58-.07 4.85c-.05 1.17-.24 1.8-.4 2.22-.22.56-.48.96-.9 1.38-.42.42-.82.69-1.38.9-.41.16-1.05.35-2.21.4-1.28.06-1.65.07-4.85.07s-3.58-.01-4.85-.07c-1.17-.05-1.8-.24-2.22-.4a3.77 3.77 0 0 1-1.38-.9 3.77 3.77 0 0 1-.9-1.38c-.16-.41-.35-1.05-.4-2.21C2.21 15.58 2.2 15.2 2.2 12s.01-3.58.07-4.85c.05-1.17.24-1.8.4-2.22.22-.56.48-.96.9-1.38.42-.42.82-.69 1.38-.9.41-.16 1.05-.35 2.21-.4C8.42 2.21 8.8 2.2 12 2.2z"/></svg>
      </a>
      <a class="icon-btn yt" href="https://youtube.com/@horadopiloto" target="_blank" title="YouTube">
        <svg viewBox="0 0 24 24"><path d="M23.5 6.2a3.46 3.46 0 0 0-2.43-2.45C19.38 3.2 12 3.2 12 3.2s-7.38 0-9.07.55A3.46 3.46 0 0 0 .5 6.2 36.86 36.86 0 0 0 0 12c0 1.98.18 3.93.5 5.8a3.46 3.46 0 0 0 2.43 2.45C4.62 20.8 12 20.8 12 20.8s7.38 0 9.07-.55a3.46 3.46 0 0 0 2.43-2.45c.32-1.87.5-3.82.5-5.8 0-1.98-.18-3.93-.5-5.8zM9.6 15.5V8.5l6.4 3.5-6.4 3.5z"/></svg>
      </a>
    </div>
  </header>

  <main class="container">
    <h2>Histórico e Estatísticas por Pista</h2>

    <!-- Filtro de pista -->
    <section class="section-head" style="margin-top:12px;">
      <label for="trackSelect" class="sr-only">Selecionar pista</label>
      <select id="trackSelect" aria-label="Selecionar pista"
              style="padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:#0f1118;color:var(--text);">
        <option value="">Carregando pistas…</option>
      </select>
    </section>

    <!-- Recordes da pista -->
    <section class="records-row" id="recordsPanel" style="margin:14px 0 18px; display:none;">
      <div class="records-box">
        <h3>⏱️ Recorde Extra Oficial</h3>
        <p id="bestPoleText" style="color:var(--muted)">—</p>
      </div>
      <div class="records-section">
        <h3>⏱️ Recorde Oficial</h3>
        <p id="bestLapText" style="color:var(--muted)">—</p>
      </div>
    </section>

    <!-- Histórico da pista -->
    <section class="stats-section">
      <h3>Histórico de Corridas da Pista Selecionada</h3>
      <div class="table-wrapper">
        <table id="trackTable" style="width:100%; border-collapse:collapse;">
          <thead>
          <tr>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Temporada</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Jogo</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Vencedor</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Pódio</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Pole</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Volta Rápida</th>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Piloto do Dia</th>
          </tr>
          </thead>
          <tbody id="trackTableBody">
          <tr><td colspan="7" style="padding:10px;color:var(--muted)">Selecione uma pista para visualizar…</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Estatísticas gerais por piloto -->
    <section class="stats-section" style="margin-top:28px;">
      <h3>Estatísticas por Piloto (todas as temporadas)</h3>
      <p style="color:var(--muted);margin:6px 0 10px;">
        Ordenado por: <strong>Vitórias</strong> → <strong>Pódios</strong> → <strong>Poles</strong> → <strong>Voltas Rápidas</strong> → <strong>Piloto do Dia</strong>
      </p>
      <div class="table-wrapper">
        <table id="pilotsTable" style="width:100%; border-collapse:collapse;">
          <thead>
          <tr>
            <th style="text-align:left; padding:8px; border-bottom:1px solid var(--line);">Piloto</th>
            <th style="text-align:right; padding:8px; border-bottom:1px solid var(--line);">Vitórias</th>
            <th style="text-align:right; padding:8px; border-bottom:1px solid var(--line);">Pódios</th>
            <th style="text-align:right; padding:8px; border-bottom:1px solid var(--line);">Poles</th>
            <th style="text-align:right; padding:8px; border-bottom:1px solid var(--line);">VR</th>
            <th style="text-align:right; padding:8px; border-bottom:1px solid var(--line);">DOT</th>
          </tr>
          </thead>
          <tbody id="pilotsTableBody">
          <tr><td colspan="7" style="padding:10px;color:var(--muted)">Carregando estatísticas…</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="footer">
    <small>© 2025 Hora do Piloto — Renan Mioto</small>
  </footer>
</body>
</html>